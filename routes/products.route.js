/** =====================================================================
 *  PRODUCTS ROUTER
=========================================================================*/
const { Router } = require('express');
const { check } = require('express-validator');

// MIDDLEWARES
const { validarCampos } = require('../middlewares/validar-campos');
const { validarJWT } = require('../middlewares/validar-jwt');

// CONTROLLER
const {
    getProducts,
    createProduct,
    updateProduct,
    deleteProduct,
    oneProduct,
    updateClientProduct,
    getProductsClients,
} = require('../controllers/products.controller');

const router = Router();

/** =====================================================================
 *  GET PRODUCTS
=========================================================================*/
router.get('/', validarJWT, getProducts);
/** =====================================================================
 *  GET PRODUCTS 
=========================================================================*/

/** =====================================================================
 *  ONE GET PRODUCT
=========================================================================*/
router.get('/:id', validarJWT, oneProduct);
/** =====================================================================
 *  ONE GET PRODUCT
=========================================================================*/

/** =====================================================================
 *  GET PRODUCTS CLIENTS
=========================================================================*/
router.get('/client/:id', validarJWT, getProductsClients);
/** =====================================================================
 *  GET PRODUCTS CLIENTS
=========================================================================*/

/** =====================================================================
 *  CREATE PRODUCTS
=========================================================================*/
router.post('/', [
        validarJWT,
        check('code', 'El codigo es obligatorio').not().isEmpty(),
        check('serial', 'El nombre es obligatorio').not().isEmpty(),
        validarCampos
    ],
    createProduct
);
/** =====================================================================
 *  CREATE PRODUCTS
=========================================================================*/

/** =====================================================================
 *  UPDATE PRODUCT
=========================================================================*/
router.put('/:id', [
        validarJWT,
        check('code', 'El codigo es obligatorio').not().isEmpty(),
        check('serial', 'El nombre es obligatorio').not().isEmpty(),
        validarCampos
    ],
    updateProduct
);
/** =====================================================================
 *  UPDATE PRODUCT
=========================================================================*/
/** =====================================================================
 *  UPDATE CLIENT PRODUCT
=========================================================================*/
router.put('/:product/change', [validarJWT], updateClientProduct);
/** =====================================================================
 *  UPDATE CLIENT PRODUCT
=========================================================================*/

/** =====================================================================
 *  DELETE PRODUCT
=========================================================================*/
router.delete('/:id', validarJWT, deleteProduct);
/** =====================================================================
 *  DELETE PRODUCT
=========================================================================*/


// EXPORT
module.exports = router;